@using System.Web.Optimization
@model MyCBA.Core.Models.LoanCustAcct
@{
    ViewBag.Title = "Open Loan Account";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()
<div class="form-horizontal col-md-6">
    <span id="error" class="text-red "></span>
    @Html.ValidationSummary(true, "", new { @class = "text-danger" })

    @*<div class="form-group">
            @Html.LabelFor(model => model.customer)
            @Html.DropDownListFor(model => model.customer, new SelectList(Model.Customers,
                "name", "name"),"Choose an Option", new {@class = "form-control"})
            @Html.ValidationMessageFor(model => model.customer, "", new { @class = "text-danger" })
            <span id="customererror" class="text-red "></span>
        </div>*@
    @if (TempData["message"] != null)
    {
        if (TempData["message"].ToString() == "Error")
        {
            <div class="alert alert-danger">
                <strong>Loan Account creation failed, because Loan Account Configuration is not yet set &nbsp;</strong>
            </div>
        }
        else if (TempData["message"].ToString() == "UnPaid")
        {
            <div class="alert alert-warning">
                <strong>You have not completely paid for previous loan &nbsp;</strong>
            </div>
        }
        else if (TempData["message"].ToString() == "Success")
        {
            <div class="alert alert-success">
                <strong>Loan Account creation successful&nbsp;</strong>
            </div>
        }
        else if (TempData["message"].ToString() == "Gl Account")
        {
            <div class="alert alert-success">
                <strong>Loan Asset Account has not been created&nbsp;</strong>
            </div>
        }
        else if (TempData["message"].ToString() == "Closed")
        {
            <div class="alert alert-error">
                <strong>Customer's Account is Closed&nbsp;</strong>
            </div>

        }
    }

        <div class="form-group">
            @Html.LabelFor(model => model.LoanAmount)
            @Html.EditorFor(model => model.LoanAmount, new { htmlAttributes = new { @class = "form-control", type = "number", required = "required", step = "any", minlength = 3, min = 0.00, maxlength = 15, placeholder = "Enter Amount" } })
            @Html.ValidationMessageFor(model => model.LoanAmount, "", new { @class = "text-danger" })
            <span id="amounterror" class="text-red "></span>
        </div>

        <div class="form-group">
            @Html.LabelFor(model => model.DurationInMonths)
            @Html.EditorFor(model => model.DurationInMonths, new { htmlAttributes = new { @class = "form-control", required = "required", @type = "number", min = 1, placeholder = "Enter number of months" } })
            @Html.ValidationMessageFor(model => model.DurationInMonths, "", new { @class = "text-danger" })
            <span id="repaymentPlanerror" class="text-red "></span>
        </div>
        @*<div class="form-group">
                     @Html.LabelFor(model => model.termsOfLoan)
                @Html.DropDownListFor(m => m.termsOfLoan, new SelectList(Enum.GetNames(typeof(MyCBA.Core.Models.TermsOfLoan))), "Choose Option", new { @class = "form-control", required = "required" })
                @Html.ValidationMessageFor(model => model.termsOfLoan, "", new { @class = "text-danger" })
                <span id="accTypeerror" class="text-red "></span>
            </div> *@


    </div>
            <div class="form-group">
                <div class="col-md-offset-2 col-md-10">
                    <input type="submit" value="SUBMIT" class="btn btn-default" />
                </div>
            </div>


        }
        @section ViewSpecificJavascript
            {
            <script>
                $(document).ready(function () {
                    setTimeout(function () {
                        $(".alert").fadeOut(100, null);
                    },
                        3000);


                    // ;
                    //$("form").submit(function (e) {

                    //    var firstVal = $('#DurationInMonths').val();
                    //    var secondVal = $('#loanAmount').val();
                    //    var termsOfLoan = $('#termsOfLoan').val();

                    //    if (firstVal == 0 || firstVal == "" || secondVal == 0.00 || secondVal == 0 || termsOfLoan == 0) {
                    //        $("input[type = 'submit']").attr("disabled", true);
                    //        e.preventDefault();
                    //        $("#error").html("All fields are required");
                    //    }
                    //    else {
                    //        $("input[type = 'submit']").attr("disabled", false);

                    //        $("#error").html("");
                    //    }


                    //})
                })
            </script>
        }
